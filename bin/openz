#!/usr/bin/env zsh

local __open_yazi_silently() {
  wezterm start --always-new-process -- yazi "$1" >/dev/null 2>&1
}

if [[ "$#" == 0 ]]; then
  __open_yazi_silently .
  return
fi

if [[ -f "$1" ]]; then
  $EDITOR "$1"
  return
elif [[ -d "$1" ]]; then
  __open_yazi_silently "$1"
  return
fi

local zquery_result="$(zoxide query $1)"
if [[ -f "$zquery_result" ]]; then
  $EDITOR "$zquery_result"
  return
elif [[ -d "$zquery_result" ]]; then
  __open_yazi_silently "$zquery_result"
  return
fi

__open_yazi_silently .
