#!/usr/bin/env zsh

kt-vim-session() {
  if [[ $# -eq 0 ]]; then
    NVIM_PROJECT_DIR="$PWD/"
  else
    if [[ ! -d "$1/" ]]; then
      echo "invalid project directory: $1/"
      return 1
    fi
    NVIM_PROJECT_DIR="$1/"
  fi
  export NVIM_PROJECT_DIR

  local KITTY_SESSION_CONF="$KITTY_SESSION_DIR/vim_project_dir.conf"
  local KITTY_INSTANCE_GROUP="neovim"

  export NVIM_PROJECT_DIR="$1/"
  cd "$NVIM_PROJECT_DIR"
  /Applications/kitty.app/Contents/MacOS/kitty --session "$KITTY_SESSION_CONF" --detach
  unset NVIM_PROJECT_DIR
}
