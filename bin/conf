#!/usr/bin/env zsh

local options=$(fselect name from $XDG_CONFIG_HOME/ depth 1 where is_dir and name != '.*')
local selected=$(
  echo ${(F)options} | fzf \
    --layout=reverse \
    --query="$1" \
    --preview="ls -lash $XDG_CONFIG_HOME/{}/"
)

if [[ -v selected ]]; then
  (cd "$XDG_CONFIG_HOME/$selected/" && $EDITOR)
fi
