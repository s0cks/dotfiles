- defaults:
    link:
      relink: True
    shell:
      quiet: True
      stdout: True
- shell:
  - command: echo "installing MacOS defaults...."
- jsonnet:
    include_dirs:
    - "."
    items:
      "macos/":
        source: macos/generate.jsonnet
        include_dirs:
        - macos/
      "/usr/local/share/toolchains/": 
        source: macos/toolchains/generate.jsonnet
        include_dirs:
        - macos/toolchains/
      "~/Library/LaunchAgents/":
        source: macos/LaunchAgents/generate.jsonnet
        include_dirs:
        - macos/LaunchAgents/
        vars:
          COMPANY: io.github.s0cks
        vars_from_env:
        - HOME
        - ARIA2_HOME
        - XDG_CONFIG_HOME
        - ARIA2_SECRET
        - ARIA2_USER_AGENT
        - HOMEBREW_REPOSITORY
- shell:
  - chmod +x macos/defaults.sh
  - ./macos/defaults.sh

# TODO(@s0cks): need to plutil -lint plists
- link:
    /usr/local/share/zsh/functions/:
      glob: true
      path: bin/*

# TODO(@s0cks): install Brewfile
