- defaults:
    link:
      relink: True
    shell:
      quiet: True
      stdout: True
- shell:
  - command: echo "installing MacOS config...."
- jsonnet:
    include_dirs:
    - "."
    items:
      "~/Library/LaunchAgents/":
        source: macos/LaunchAgents/generate.jsonnet
        include_dirs:
        - "macos/LaunchAgents/"
        vars:
          COMPANY: io.github.s0cks
        vars_from_env:
        - HOME
        - ARIA2_HOME
        - XDG_CONFIG_HOME
        - ARIA2_SECRET
        - ARIA2_USER_AGENT
        - HOMEBREW_REPOSITORY
- shell:
  - command: echo "formatting plists....."
  - command: >
      fselect abspath from ~/Library/LaunchAgents/ where is_file and name = "io.github.s0cks.*" and extension eq "plist" | xargs -I {} zsh -c 'echo "formatting {}"; xmlformat --overwrite {}'
- link:
    /usr/local/share/zsh/functions/:
      glob: true
      path: bin/*

# TODO(@s0cks): install Brewfile
